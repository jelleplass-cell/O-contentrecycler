<!DOCTYPE html>
<html class="light" lang="nl">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport"/>
    <title>Odido Content Recycler - Prototype</title>
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700;800&display=swap" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&display=swap" rel="stylesheet"/>
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        "primary": "#664ce6",
                        "primary-dark": "#533bc4",
                        "background": "#F0E8F8",
                        "surface": "#ffffff",
                        "header-start": "#7B68EE",
                        "header-end": "#9370DB",
                        "nav-blue": "#3366FF",
                        "text-main": "#121117",
                        "text-secondary": "#6a6487",
                    },
                    fontFamily: { "display": ["Manrope", "sans-serif"] },
                    borderRadius: { "DEFAULT": "1rem", "lg": "1.5rem", "xl": "2rem", "2xl": "2.5rem", "full": "9999px" },
                },
            },
        }
    </script>
    <style>
        * { box-sizing: border-box; }
        html, body {
            margin: 0;
            padding: 0;
            min-height: 100%;
            width: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            overflow-x: hidden;
        }

        /* iPhone Frame - Only on desktop */
        .iphone-frame {
            display: none;
        }

        @media (min-width: 500px) {
            .iphone-frame {
                display: flex;
                justify-content: center;
                align-items: center;
                min-height: 100vh;
                padding: 40px 20px;
            }

            .iphone-device {
                position: relative;
                width: 430px;
                height: 932px;
                background: #1a1a1a;
                border-radius: 60px;
                padding: 14px;
                box-shadow: 0 50px 100px -20px rgba(0,0,0,0.25),
                           0 30px 60px -30px rgba(0,0,0,0.3),
                           inset 0 0 0 2px #2a2a2a,
                           inset 0 0 0 4px #1a1a1a;
            }

            /* Dynamic Island notch */
            .iphone-device::before {
                content: '';
                position: absolute;
                top: 0;
                left: 50%;
                transform: translateX(-50%);
                width: 150px;
                height: 30px;
                background: #1a1a1a;
                border-radius: 0 0 20px 20px;
                z-index: 100;
            }

            .iphone-screen {
                width: 100%;
                height: 100%;
                background: #F0E8F8;
                border-radius: 48px;
                overflow: hidden;
                position: relative;
            }

            /* Side buttons */
            .iphone-device::after {
                content: '';
                position: absolute;
                right: -4px;
                top: 180px;
                width: 4px;
                height: 100px;
                background: #2a2a2a;
                border-radius: 0 2px 2px 0;
            }

            .volume-buttons {
                position: absolute;
                left: -4px;
                top: 140px;
                width: 4px;
                height: 60px;
                background: #2a2a2a;
                border-radius: 2px 0 0 2px;
            }

            .volume-buttons::before {
                content: '';
                position: absolute;
                left: 0;
                top: 80px;
                width: 4px;
                height: 60px;
                background: #2a2a2a;
                border-radius: 2px 0 0 2px;
            }

            .mute-switch {
                position: absolute;
                left: -4px;
                top: 100px;
                width: 4px;
                height: 30px;
                background: #2a2a2a;
                border-radius: 2px 0 0 2px;
            }
        }

        /* Mobile - No frame */
        @media (max-width: 499px) {
            body {
                background: #F0E8F8;
            }
            .iphone-frame {
                display: block;
            }
            .iphone-device,
            .volume-buttons,
            .mute-switch {
                display: contents;
            }
            .iphone-device::before,
            .iphone-device::after {
                display: none;
            }
            .iphone-screen {
                min-height: 100vh;
                border-radius: 0;
            }
            #app {
                max-width: 100% !important;
                border-radius: 0 !important;
            }
        }

        /* App container */
        #app {
            width: 100%;
            height: 100%;
            position: relative;
            overflow: hidden;
            font-family: 'Manrope', sans-serif;
        }

        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

        .screen {
            display: none;
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            overflow: hidden;
            flex-direction: column;
        }
        .screen.active { display: flex; }

        .screen-scroll {
            flex: 1;
            overflow-y: auto;
            overflow-x: hidden;
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        .screen-scroll::-webkit-scrollbar {
            display: none;
        }

        .glass-card { background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(10px); }
        .line-clamp-2 { display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
        .line-clamp-3 { display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical; overflow: hidden; }

        /* Modal animations */
        .modal-overlay {
            opacity: 0;
            transition: opacity 0.3s ease;
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            z-index: 100;
        }
        .modal-overlay.show { opacity: 1; }
        .modal-content {
            transform: translateY(100%);
            transition: transform 0.3s ease;
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
        }
        .modal-overlay.show .modal-content { transform: translateY(0); }

        /* Autocomplete */
        .autocomplete-dropdown {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            margin-top: 8px;
            background: white;
            border-radius: 16px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.15);
            max-height: 300px;
            overflow-y: auto;
            z-index: 50;
        }
        .autocomplete-item:hover { background: #f3f0ff; }

        /* Toggle switch */
        .toggle-switch { transition: background-color 0.3s ease; }
        .toggle-switch.active { background-color: #664ce6; }
        .toggle-switch .toggle-dot { transition: transform 0.3s ease; }
        .toggle-switch.active .toggle-dot { transform: translateX(20px); }

    </style>
</head>
<body class="font-display text-text-main">

<!-- iPhone Frame Container -->
<div class="iphone-frame">
    <div class="iphone-device">
        <div class="volume-buttons"></div>
        <div class="mute-switch"></div>
        <div class="iphone-screen">

<!-- ==================== APP CONTAINER ==================== -->
<div id="app" class="bg-background">

<!-- ==================== SCREEN: HOME ==================== -->
<div id="screen-home" class="screen active">
    <div class="screen-scroll">
        <!-- Header -->
        <header class="bg-gradient-to-r from-header-start to-header-end pb-8 pt-14 px-5 rounded-b-[2.5rem] shadow-lg relative z-10">
            <div class="flex items-center justify-between mb-6">
                <div class="flex items-center gap-3">
                    <div class="flex h-10 w-10 items-center justify-center rounded-xl bg-white/20 text-white">
                        <span class="material-symbols-outlined">recycling</span>
                    </div>
                    <div>
                        <h1 class="text-white text-lg font-bold">Odido Recycler</h1>
                        <p class="text-white/80 text-xs">Welkom terug, Sarah</p>
                    </div>
                </div>
                <button onclick="navigateTo('settings')" class="h-10 w-10 overflow-hidden rounded-full border-2 border-white/30 relative">
                    <img class="h-full w-full object-cover" src="https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=100&h=100&fit=crop&crop=face" alt="Profile"/>
                    <div class="absolute bottom-0 right-0 h-3 w-3 rounded-full bg-green-400 border-2 border-header-end"></div>
                </button>
            </div>

            <!-- Search Bar -->
            <div class="relative -mb-14 z-20" id="search-container">
                <div class="flex items-center rounded-full bg-white p-2 shadow-lg h-14">
                    <div class="flex h-10 w-10 items-center justify-center text-nav-blue">
                        <span class="material-symbols-outlined">search</span>
                    </div>
                    <input id="search-input" oninput="handleSearch(this.value)" onfocus="handleSearchFocus()" class="flex-1 bg-transparent border-none text-base placeholder:text-gray-400 focus:ring-0 focus:outline-none" placeholder="Zoek in bronbestanden..."/>
                    <button onclick="openFilterModal()" class="flex h-10 w-10 items-center justify-center rounded-full bg-gray-50 text-gray-500 hover:bg-gray-100">
                        <span class="material-symbols-outlined text-xl">tune</span>
                    </button>
                </div>

                <!-- Autocomplete Results -->
                <div id="search-autocomplete" class="autocomplete-dropdown hidden">
                    <!-- Results will be populated by JS -->
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="pt-16 px-5">
            <!-- Categories -->
            <div class="flex gap-2 overflow-x-auto no-scrollbar pb-4 -mx-5 px-5">
                <button onclick="filterByCategory('all')" class="category-btn active flex items-center gap-2 whitespace-nowrap rounded-full px-4 py-2 text-sm font-bold transition-all" data-category="all">
                    <span class="material-symbols-outlined text-lg">auto_awesome</span>All
                </button>
                <button onclick="filterByCategory('copydoc')" class="category-btn flex items-center gap-2 whitespace-nowrap rounded-full px-4 py-2 text-sm font-bold transition-all" data-category="copydoc">
                    <span class="material-symbols-outlined text-lg">description</span>CopyDocs
                </button>
                <button onclick="filterByCategory('campaign')" class="category-btn flex items-center gap-2 whitespace-nowrap rounded-full px-4 py-2 text-sm font-bold transition-all" data-category="campaign">
                    <span class="material-symbols-outlined text-lg">campaign</span>Campaigns
                </button>
                <button onclick="filterByCategory('sales')" class="category-btn flex items-center gap-2 whitespace-nowrap rounded-full px-4 py-2 text-sm font-bold transition-all" data-category="sales">
                    <span class="material-symbols-outlined text-lg">sell</span>Sales
                </button>
                <button onclick="filterByCategory('whitepaper')" class="category-btn flex items-center gap-2 whitespace-nowrap rounded-full px-4 py-2 text-sm font-bold transition-all" data-category="whitepaper">
                    <span class="material-symbols-outlined text-lg">article</span>Whitepapers
                </button>
                <button onclick="filterByCategory('presentation')" class="category-btn flex items-center gap-2 whitespace-nowrap rounded-full px-4 py-2 text-sm font-bold transition-all" data-category="presentation">
                    <span class="material-symbols-outlined text-lg">slideshow</span>Presentaties
                </button>
                <button onclick="filterByCategory('news')" class="category-btn flex items-center gap-2 whitespace-nowrap rounded-full px-4 py-2 text-sm font-bold transition-all" data-category="news">
                    <span class="material-symbols-outlined text-lg">newspaper</span>Nieuws
                </button>
                <button onclick="filterByCategory('blog')" class="category-btn flex items-center gap-2 whitespace-nowrap rounded-full px-4 py-2 text-sm font-bold transition-all" data-category="blog">
                    <span class="material-symbols-outlined text-lg">rss_feed</span>Blogs
                </button>
            </div>

            <!-- Section Header -->
            <div class="flex items-center justify-between mb-4 mt-2">
                <h2 class="text-lg font-bold">Recente bronbestanden</h2>
                <button onclick="navigateTo('library')" class="text-nav-blue text-sm font-bold">Alles zien</button>
            </div>

            <!-- Source Files Grid -->
            <div id="home-files-grid" class="flex flex-col gap-3 pb-8">
                <!-- Populated by JS - max 10 items -->
            </div>
        </main>
    </div>

    <!-- Fixed Footer Container -->
    <div class="relative shrink-0">
        <!-- FAB -->
        <button onclick="startNewRecycle()" class="absolute -top-20 right-5 flex h-14 w-14 items-center justify-center rounded-full bg-primary text-white shadow-lg hover:scale-110 active:scale-95 transition-transform z-30">
            <span class="material-symbols-outlined text-3xl">add</span>
        </button>

        <!-- Bottom Navigation -->
        <nav class="bg-white/95 backdrop-blur-md pb-8 pt-2 px-6 shadow-[0_-4px_20px_rgba(0,0,0,0.05)] border-t border-gray-100">
        <div class="flex items-center justify-around">
            <button onclick="navigateTo('home')" class="nav-btn flex flex-col items-center gap-1 p-2 text-primary" data-screen="home">
                <span class="material-symbols-outlined" style="font-variation-settings: 'FILL' 1;">home</span>
                <span class="text-[10px] font-bold">Home</span>
            </button>
            <button onclick="navigateTo('history')" class="nav-btn flex flex-col items-center gap-1 p-2 text-gray-400" data-screen="history">
                <span class="material-symbols-outlined">history</span>
                <span class="text-[10px] font-medium">Historie</span>
            </button>
            <button onclick="navigateTo('library')" class="nav-btn flex flex-col items-center gap-1 p-2 text-gray-400" data-screen="library">
                <span class="material-symbols-outlined">folder_open</span>
                <span class="text-[10px] font-medium">Bibliotheek</span>
            </button>
            <button onclick="navigateTo('settings')" class="nav-btn flex flex-col items-center gap-1 p-2 text-gray-400" data-screen="settings">
                <span class="material-symbols-outlined">settings</span>
                <span class="text-[10px] font-medium">Instellingen</span>
            </button>
        </div>
        </nav>
    </div>

    <!-- Filter Modal - Inside screen -->
    <div id="filter-modal" class="modal-overlay hidden" onclick="closeFilterModal()">
        <div class="modal-content bg-white rounded-t-3xl max-h-[70%] overflow-y-auto" onclick="event.stopPropagation()">
            <div class="p-5">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-xl font-bold">Filters</h2>
                    <button onclick="closeFilterModal()" class="h-10 w-10 flex items-center justify-center rounded-full hover:bg-gray-100">
                        <span class="material-symbols-outlined">close</span>
                    </button>
                </div>

                <!-- Type Filter -->
                <div class="mb-6">
                    <h3 class="font-medium mb-3">Type bron</h3>
                    <div class="flex flex-wrap gap-2">
                        <button class="filter-type-btn px-4 py-2 rounded-full border border-gray-200 text-sm bg-primary text-white" data-type="all">Alle</button>
                        <button class="filter-type-btn px-4 py-2 rounded-full border border-gray-200 text-sm" data-type="copydoc">CopyDoc</button>
                        <button class="filter-type-btn px-4 py-2 rounded-full border border-gray-200 text-sm" data-type="whitepaper">Whitepaper</button>
                        <button class="filter-type-btn px-4 py-2 rounded-full border border-gray-200 text-sm" data-type="sales">Sales</button>
                        <button class="filter-type-btn px-4 py-2 rounded-full border border-gray-200 text-sm" data-type="presentation">Presentatie</button>
                        <button class="filter-type-btn px-4 py-2 rounded-full border border-gray-200 text-sm" data-type="news">Nieuws</button>
                    </div>
                </div>

                <!-- Uploader Filter -->
                <div class="mb-6">
                    <h3 class="font-medium mb-3">Geupload door</h3>
                    <select id="uploader-filter" class="w-full p-3 border border-gray-200 rounded-xl text-sm">
                        <option value="all">Alle uploaders</option>
                        <option value="sarah">Sarah de Vries</option>
                        <option value="mark">Mark Janssen</option>
                        <option value="lisa">Lisa van den Berg</option>
                        <option value="peter">Peter de Groot</option>
                        <option value="anna">Anna Bakker</option>
                        <option value="tom">Tom Visser</option>
                        <option value="emma">Emma Smit</option>
                        <option value="jan">Jan de Boer</option>
                        <option value="sophie">Sophie Mulder</option>
                        <option value="david">David Hendriks</option>
                        <option value="julia">Julia Peters</option>
                        <option value="kevin">Kevin van Dijk</option>
                        <option value="maria">Maria Jansen</option>
                        <option value="robin">Robin de Jong</option>
                        <option value="eva">Eva Meijer</option>
                    </select>
                </div>

                <!-- Date Filter -->
                <div class="mb-6">
                    <h3 class="font-medium mb-3">Datum</h3>
                    <div class="flex gap-2">
                        <button class="filter-date-btn flex-1 px-3 py-2 rounded-full border border-gray-200 text-sm bg-primary text-white">Alle</button>
                        <button class="filter-date-btn flex-1 px-3 py-2 rounded-full border border-gray-200 text-sm">Week</button>
                        <button class="filter-date-btn flex-1 px-3 py-2 rounded-full border border-gray-200 text-sm">Maand</button>
                        <button class="filter-date-btn flex-1 px-3 py-2 rounded-full border border-gray-200 text-sm">Kwartaal</button>
                    </div>
                </div>

                <button onclick="applyFilters()" class="w-full bg-primary text-white font-bold py-4 rounded-full">
                    Filters toepassen
                </button>
            </div>
        </div>
    </div>
</div>

<!-- ==================== SCREEN: LIBRARY ==================== -->
<div id="screen-library" class="screen">
    <div class="screen-scroll">
        <!-- Header -->
        <header class="bg-white border-b border-gray-100 pt-14 pb-4 px-5">
            <div class="flex items-center justify-between mb-4">
                <h1 class="text-xl font-bold">Bibliotheek</h1>
                <button onclick="openLibraryFilterModal()" class="flex h-10 w-10 items-center justify-center rounded-full bg-gray-50 text-gray-500">
                    <span class="material-symbols-outlined">filter_list</span>
                </button>
            </div>
            <div class="flex items-center bg-gray-50 rounded-full px-4 py-2">
                <span class="material-symbols-outlined text-gray-400 mr-2">search</span>
                <input id="library-search" oninput="filterLibrary(this.value)" class="flex-1 bg-transparent border-none text-sm focus:outline-none" placeholder="Zoek in bibliotheek..."/>
            </div>
        </header>

        <!-- Categories -->
        <div class="flex gap-2 overflow-x-auto no-scrollbar py-4 px-5">
            <button onclick="filterLibraryCategory('all')" class="lib-category-btn active whitespace-nowrap rounded-full px-4 py-2 text-sm font-bold bg-primary text-white">Alles</button>
            <button onclick="filterLibraryCategory('copydoc')" class="lib-category-btn whitespace-nowrap rounded-full px-4 py-2 text-sm font-bold bg-white text-text-main">CopyDocs</button>
            <button onclick="filterLibraryCategory('campaign')" class="lib-category-btn whitespace-nowrap rounded-full px-4 py-2 text-sm font-bold bg-white text-text-main">Campaigns</button>
            <button onclick="filterLibraryCategory('sales')" class="lib-category-btn whitespace-nowrap rounded-full px-4 py-2 text-sm font-bold bg-white text-text-main">Sales</button>
            <button onclick="filterLibraryCategory('whitepaper')" class="lib-category-btn whitespace-nowrap rounded-full px-4 py-2 text-sm font-bold bg-white text-text-main">Whitepapers</button>
            <button onclick="filterLibraryCategory('presentation')" class="lib-category-btn whitespace-nowrap rounded-full px-4 py-2 text-sm font-bold bg-white text-text-main">Presentaties</button>
        </div>

        <!-- Files Grid -->
        <div id="library-files-grid" class="px-5 flex flex-col gap-3 pb-8">
            <!-- Populated by JS - all items -->
        </div>
    </div>

    <!-- Bottom Navigation -->
    <nav class="shrink-0 bg-white/95 backdrop-blur-md pb-8 pt-2 px-6 shadow-[0_-4px_20px_rgba(0,0,0,0.05)] border-t border-gray-100">
        <div class="flex items-center justify-around">
            <button onclick="navigateTo('home')" class="nav-btn flex flex-col items-center gap-1 p-2 text-gray-400" data-screen="home">
                <span class="material-symbols-outlined">home</span>
                <span class="text-[10px] font-medium">Home</span>
            </button>
            <button onclick="navigateTo('history')" class="nav-btn flex flex-col items-center gap-1 p-2 text-gray-400" data-screen="history">
                <span class="material-symbols-outlined">history</span>
                <span class="text-[10px] font-medium">Historie</span>
            </button>
            <button onclick="navigateTo('library')" class="nav-btn flex flex-col items-center gap-1 p-2 text-primary" data-screen="library">
                <span class="material-symbols-outlined" style="font-variation-settings: 'FILL' 1;">folder_open</span>
                <span class="text-[10px] font-bold">Bibliotheek</span>
            </button>
            <button onclick="navigateTo('settings')" class="nav-btn flex flex-col items-center gap-1 p-2 text-gray-400" data-screen="settings">
                <span class="material-symbols-outlined">settings</span>
                <span class="text-[10px] font-medium">Instellingen</span>
            </button>
        </div>
    </nav>
</div>

<!-- ==================== SCREEN: HISTORY ==================== -->
<div id="screen-history" class="screen">
    <div class="screen-scroll">
        <!-- Header -->
        <header class="bg-white border-b border-gray-100 pt-14 pb-4 px-5">
            <h1 class="text-xl font-bold">Geschiedenis</h1>
            <p class="text-sm text-text-secondary mt-1">Alle activiteiten en gerecyclede content</p>
        </header>

        <!-- History List -->
        <div id="history-list" class="px-5 py-4 flex flex-col gap-4 pb-8">
            <!-- Populated by JS -->
        </div>
    </div>

    <!-- Bottom Navigation -->
    <nav class="shrink-0 bg-white/95 backdrop-blur-md pb-8 pt-2 px-6 shadow-[0_-4px_20px_rgba(0,0,0,0.05)] border-t border-gray-100">
        <div class="flex items-center justify-around">
            <button onclick="navigateTo('home')" class="nav-btn flex flex-col items-center gap-1 p-2 text-gray-400" data-screen="home">
                <span class="material-symbols-outlined">home</span>
                <span class="text-[10px] font-medium">Home</span>
            </button>
            <button onclick="navigateTo('history')" class="nav-btn flex flex-col items-center gap-1 p-2 text-primary" data-screen="history">
                <span class="material-symbols-outlined" style="font-variation-settings: 'FILL' 1;">history</span>
                <span class="text-[10px] font-bold">Historie</span>
            </button>
            <button onclick="navigateTo('library')" class="nav-btn flex flex-col items-center gap-1 p-2 text-gray-400" data-screen="library">
                <span class="material-symbols-outlined">folder_open</span>
                <span class="text-[10px] font-medium">Bibliotheek</span>
            </button>
            <button onclick="navigateTo('settings')" class="nav-btn flex flex-col items-center gap-1 p-2 text-gray-400" data-screen="settings">
                <span class="material-symbols-outlined">settings</span>
                <span class="text-[10px] font-medium">Instellingen</span>
            </button>
        </div>
    </nav>
</div>

<!-- ==================== SCREEN: SETTINGS ==================== -->
<div id="screen-settings" class="screen">
    <div class="screen-scroll">
        <!-- Header -->
        <header class="bg-white border-b border-gray-100 pt-14 pb-4 px-5">
            <h1 class="text-xl font-bold">Instellingen</h1>
        </header>

        <main class="px-5 py-4">
            <!-- Profile Section -->
            <section class="bg-white rounded-2xl p-4 mb-4 shadow-sm">
                <div class="flex items-center gap-4 mb-4">
                    <div class="h-16 w-16 rounded-full overflow-hidden">
                        <img class="h-full w-full object-cover" src="https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=100&h=100&fit=crop&crop=face" alt="Profile"/>
                    </div>
                    <div>
                        <h3 class="font-bold text-lg">Sarah de Vries</h3>
                        <p class="text-text-secondary text-sm">Content Manager</p>
                        <p class="text-text-secondary text-xs">sarah.devries@odido.nl</p>
                    </div>
                </div>
                <button class="w-full py-2 border border-gray-200 rounded-full text-sm font-medium hover:bg-gray-50">Profiel bewerken</button>
            </section>

            <!-- Connections -->
            <section class="bg-white rounded-2xl p-4 mb-4 shadow-sm">
                <h3 class="font-bold mb-3">Koppelingen</h3>
                <div class="flex items-center justify-between py-3 border-b border-gray-100">
                    <div class="flex items-center gap-3">
                        <div class="h-10 w-10 rounded-lg bg-blue-100 flex items-center justify-center">
                            <span class="material-symbols-outlined text-blue-600">cloud</span>
                        </div>
                        <div>
                            <p class="font-medium text-sm">Microsoft 365</p>
                            <p class="text-xs text-green-600">Verbonden</p>
                        </div>
                    </div>
                    <span class="material-symbols-outlined text-green-600">check_circle</span>
                </div>
                <div class="flex items-center justify-between py-3 border-b border-gray-100">
                    <div class="flex items-center gap-3">
                        <div class="h-10 w-10 rounded-lg bg-orange-100 flex items-center justify-center">
                            <span class="material-symbols-outlined text-orange-600">inventory_2</span>
                        </div>
                        <div>
                            <p class="font-medium text-sm">Bynder DAM</p>
                            <p class="text-xs text-green-600">Verbonden</p>
                        </div>
                    </div>
                    <span class="material-symbols-outlined text-green-600">check_circle</span>
                </div>
                <div class="flex items-center justify-between py-3">
                    <div class="flex items-center gap-3">
                        <div class="h-10 w-10 rounded-lg bg-purple-100 flex items-center justify-center">
                            <span class="material-symbols-outlined text-purple-600">hub</span>
                        </div>
                        <div>
                            <p class="font-medium text-sm">Salesforce</p>
                            <p class="text-xs text-gray-400">Niet verbonden</p>
                        </div>
                    </div>
                    <button class="text-primary text-sm font-medium">Verbinden</button>
                </div>
            </section>

            <!-- Tone of Voice -->
            <section onclick="navigateTo('tone-of-voice')" class="bg-white rounded-2xl p-4 mb-4 shadow-sm cursor-pointer hover:bg-gray-50 transition-colors">
                <div class="flex items-center justify-between">
                    <div class="flex items-center gap-3">
                        <div class="h-10 w-10 rounded-lg bg-primary/10 flex items-center justify-center">
                            <span class="material-symbols-outlined text-primary">record_voice_over</span>
                        </div>
                        <div>
                            <p class="font-bold">Tone of Voice</p>
                            <p class="text-xs text-text-secondary">Odido huisstijl & richtlijnen</p>
                        </div>
                    </div>
                    <span class="material-symbols-outlined text-gray-400">chevron_right</span>
                </div>
            </section>

            <!-- Other Settings -->
            <section class="bg-white rounded-2xl shadow-sm overflow-hidden mb-4">
                <button class="w-full flex items-center justify-between p-4 border-b border-gray-100 hover:bg-gray-50">
                    <div class="flex items-center gap-3">
                        <span class="material-symbols-outlined text-gray-600">lock</span>
                        <span class="text-sm font-medium">Wachtwoord wijzigen</span>
                    </div>
                    <span class="material-symbols-outlined text-gray-400">chevron_right</span>
                </button>
                <button class="w-full flex items-center justify-between p-4 border-b border-gray-100 hover:bg-gray-50">
                    <div class="flex items-center gap-3">
                        <span class="material-symbols-outlined text-gray-600">notifications</span>
                        <span class="text-sm font-medium">Notificaties</span>
                    </div>
                    <span class="material-symbols-outlined text-gray-400">chevron_right</span>
                </button>
                <button class="w-full flex items-center justify-between p-4 border-b border-gray-100 hover:bg-gray-50">
                    <div class="flex items-center gap-3">
                        <span class="material-symbols-outlined text-gray-600">language</span>
                        <span class="text-sm font-medium">Taal</span>
                    </div>
                    <span class="text-sm text-text-secondary">Nederlands</span>
                </button>
                <button class="w-full flex items-center justify-between p-4 hover:bg-gray-50">
                    <div class="flex items-center gap-3">
                        <span class="material-symbols-outlined text-gray-600">help</span>
                        <span class="text-sm font-medium">Help & Support</span>
                    </div>
                    <span class="material-symbols-outlined text-gray-400">chevron_right</span>
                </button>
            </section>

            <button class="w-full py-3 text-red-500 font-medium text-sm">Uitloggen</button>
        </main>
    </div>

    <!-- Bottom Navigation -->
    <nav class="shrink-0 bg-white/95 backdrop-blur-md pb-8 pt-2 px-6 shadow-[0_-4px_20px_rgba(0,0,0,0.05)] border-t border-gray-100">
        <div class="flex items-center justify-around">
            <button onclick="navigateTo('home')" class="nav-btn flex flex-col items-center gap-1 p-2 text-gray-400" data-screen="home">
                <span class="material-symbols-outlined">home</span>
                <span class="text-[10px] font-medium">Home</span>
            </button>
            <button onclick="navigateTo('history')" class="nav-btn flex flex-col items-center gap-1 p-2 text-gray-400" data-screen="history">
                <span class="material-symbols-outlined">history</span>
                <span class="text-[10px] font-medium">Historie</span>
            </button>
            <button onclick="navigateTo('library')" class="nav-btn flex flex-col items-center gap-1 p-2 text-gray-400" data-screen="library">
                <span class="material-symbols-outlined">folder_open</span>
                <span class="text-[10px] font-medium">Bibliotheek</span>
            </button>
            <button onclick="navigateTo('settings')" class="nav-btn flex flex-col items-center gap-1 p-2 text-primary" data-screen="settings">
                <span class="material-symbols-outlined" style="font-variation-settings: 'FILL' 1;">settings</span>
                <span class="text-[10px] font-bold">Instellingen</span>
            </button>
        </div>
    </nav>
</div>

<!-- ==================== SCREEN: TONE OF VOICE ==================== -->
<div id="screen-tone-of-voice" class="screen">
    <div class="screen-scroll">
        <!-- Header -->
        <header class="bg-white border-b border-gray-100 pt-4 pb-4 px-5">
            <div class="flex items-center gap-4">
                <button onclick="navigateTo('settings')" class="h-10 w-10 flex items-center justify-center rounded-full hover:bg-gray-100">
                    <span class="material-symbols-outlined">arrow_back</span>
                </button>
                <h1 class="text-xl font-bold">Tone of Voice</h1>
            </div>
        </header>

        <main class="px-5 py-4">
            <!-- Brand Assets -->
            <section class="bg-white rounded-2xl p-4 mb-4 shadow-sm">
                <h3 class="font-bold mb-3">Brand Assets</h3>
                <p class="text-sm text-text-secondary mb-4">Upload logo's, kleuren en andere huisstijl elementen</p>

                <div class="grid grid-cols-3 gap-3 mb-4">
                    <div class="aspect-square rounded-xl bg-gradient-to-br from-header-start to-header-end flex items-center justify-center">
                        <span class="text-white text-xs font-bold">Logo</span>
                    </div>
                    <div class="aspect-square rounded-xl bg-primary flex items-center justify-center">
                        <span class="text-white text-xs font-bold">Primary</span>
                    </div>
                    <div class="aspect-square rounded-xl bg-text-main flex items-center justify-center">
                        <span class="text-white text-xs font-bold">Dark</span>
                    </div>
                </div>

                <button class="w-full py-3 border-2 border-dashed border-gray-200 rounded-xl text-sm text-text-secondary hover:border-primary hover:text-primary transition-colors">
                    <span class="material-symbols-outlined text-lg align-middle mr-1">upload</span>
                    Asset uploaden
                </button>
            </section>

            <!-- Writing Guidelines -->
            <section class="bg-white rounded-2xl p-4 mb-4 shadow-sm">
                <h3 class="font-bold mb-3">Schrijfrichtlijnen</h3>

                <div class="space-y-3">
                    <div class="p-3 bg-green-50 rounded-xl">
                        <div class="flex items-center gap-2 mb-1">
                            <span class="material-symbols-outlined text-green-600 text-lg">check_circle</span>
                            <span class="font-medium text-sm text-green-800">Wel doen</span>
                        </div>
                        <ul class="text-sm text-green-700 ml-6 list-disc space-y-1">
                            <li>Schrijf actief en direct</li>
                            <li>Gebruik "je" en "jij"</li>
                            <li>Houd zinnen kort</li>
                            <li>Wees enthousiast maar oprecht</li>
                        </ul>
                    </div>

                    <div class="p-3 bg-red-50 rounded-xl">
                        <div class="flex items-center gap-2 mb-1">
                            <span class="material-symbols-outlined text-red-600 text-lg">cancel</span>
                            <span class="font-medium text-sm text-red-800">Niet doen</span>
                        </div>
                        <ul class="text-sm text-red-700 ml-6 list-disc space-y-1">
                            <li>Geen jargon</li>
                            <li>Vermijd passieve zinnen</li>
                            <li>Geen overdrijvingen</li>
                            <li>Niet formeel of afstandelijk</li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- Example Copy -->
            <section class="bg-white rounded-2xl p-4 shadow-sm">
                <h3 class="font-bold mb-3">Voorbeeldteksten</h3>

                <div class="space-y-3">
                    <div class="p-3 bg-gray-50 rounded-xl">
                        <p class="text-xs text-text-secondary mb-1">Social Media</p>
                        <p class="text-sm">"Ontdek wat mogelijk is met glasvezel. Snel, betrouwbaar en klaar voor de toekomst."</p>
                    </div>
                    <div class="p-3 bg-gray-50 rounded-xl">
                        <p class="text-xs text-text-secondary mb-1">Nieuwsbrief</p>
                        <p class="text-sm">"Hi! Goed nieuws: we hebben weer wat moois voor je."</p>
                    </div>
                    <div class="p-3 bg-gray-50 rounded-xl">
                        <p class="text-xs text-text-secondary mb-1">B2B Sales</p>
                        <p class="text-sm">"Partner met Odido voor connectiviteit die meegroeit."</p>
                    </div>
                </div>
            </section>
        </main>
    </div>
</div>

<!-- ==================== SCREEN: FILE DETAIL ==================== -->
<div id="screen-file-detail" class="screen">
    <div class="screen-scroll">
        <!-- Header -->
        <header class="bg-white border-b border-gray-100 pt-4 pb-4 px-5">
            <div class="flex items-center justify-between">
                <button onclick="goBack()" class="h-10 w-10 flex items-center justify-center rounded-full hover:bg-gray-100">
                    <span class="material-symbols-outlined">arrow_back</span>
                </button>
                <div class="flex gap-2">
                    <button class="h-10 w-10 flex items-center justify-center rounded-full hover:bg-gray-100">
                        <span class="material-symbols-outlined">share</span>
                    </button>
                    <button class="h-10 w-10 flex items-center justify-center rounded-full hover:bg-gray-100">
                        <span class="material-symbols-outlined">more_vert</span>
                    </button>
                </div>
            </div>
        </header>

        <main class="px-5 py-4">
            <div id="file-detail-header" class="mb-6"></div>

            <section class="bg-white rounded-2xl p-4 mb-4 shadow-sm">
                <h3 class="font-bold mb-3">Document Preview</h3>
                <div id="file-preview" class="bg-gray-50 rounded-xl p-4 max-h-64 overflow-y-auto text-sm leading-relaxed"></div>
            </section>

            <section class="bg-white rounded-2xl p-4 shadow-sm">
                <h3 class="font-bold mb-3">Details</h3>
                <div id="file-metadata" class="space-y-3"></div>
            </section>
        </main>
    </div>

    <div class="shrink-0 bg-white border-t border-gray-100 p-4 pb-8">
        <button onclick="recycleCurrentFile()" class="w-full bg-primary text-white font-bold py-4 rounded-full flex items-center justify-center gap-2">
            <span class="material-symbols-outlined">recycling</span>
            Content Recyclen
        </button>
    </div>
</div>

<!-- ==================== SCREEN: TARGET SELECTION ==================== -->
<div id="screen-target-selection" class="screen">
    <div class="screen-scroll bg-[#f6f6f8]">
        <header class="bg-white border-b border-gray-100 pt-4 pb-4 px-5">
            <div class="flex items-center gap-4">
                <button onclick="navigateTo('home')" class="h-10 w-10 flex items-center justify-center rounded-full hover:bg-gray-100">
                    <span class="material-symbols-outlined">arrow_back</span>
                </button>
                <h1 class="text-lg font-bold">Kies doelgroepen</h1>
            </div>
        </header>

        <main class="px-5 py-4">
            <section id="selected-source" class="bg-white rounded-xl p-4 shadow-sm mb-6"></section>

            <section class="mb-6">
                <div class="flex items-center justify-between mb-3">
                    <h2 class="text-lg font-bold">Doelgroepen</h2>
                    <button class="text-primary text-sm font-medium flex items-center gap-1">
                        <span class="material-symbols-outlined text-lg">add</span>
                        Toevoegen
                    </button>
                </div>
                <div id="target-audiences-grid" class="grid grid-cols-2 gap-3"></div>
            </section>

            <section class="mb-6">
                <h2 class="text-lg font-bold mb-3">Kanalen</h2>
                <div id="channels-list" class="bg-white rounded-xl shadow-sm overflow-hidden"></div>
            </section>
        </main>
    </div>

    <div class="shrink-0 bg-[#f6f6f8] p-4 pb-8 border-t border-gray-200">
        <button onclick="startGeneration()" class="w-full bg-text-main text-white font-bold py-4 rounded-full flex items-center justify-center gap-2">
            <span class="material-symbols-outlined">auto_awesome</span>
            Genereer content
        </button>
    </div>
</div>

<!-- ==================== SCREEN: TARGET DETAIL ==================== -->
<div id="screen-target-detail" class="screen">
    <div class="screen-scroll bg-[#f6f6f8]">
        <header class="bg-white border-b border-gray-100 pt-4 pb-4 px-5">
            <div class="flex items-center gap-4">
                <button onclick="navigateTo('target-selection')" class="h-10 w-10 flex items-center justify-center rounded-full hover:bg-gray-100">
                    <span class="material-symbols-outlined">arrow_back</span>
                </button>
                <h1 id="target-detail-title" class="text-lg font-bold">Doelgroep bewerken</h1>
            </div>
        </header>

        <main class="px-5 py-4">
            <section class="bg-white rounded-xl p-4 shadow-sm mb-4">
                <h3 class="font-medium mb-3">Icoon kiezen</h3>
                <div id="icon-selector" class="grid grid-cols-6 gap-2"></div>
            </section>

            <section class="bg-white rounded-xl p-4 shadow-sm mb-4">
                <h3 class="font-medium mb-3">Beschrijving & Prompt</h3>
                <textarea id="target-description" class="w-full h-32 p-3 border border-gray-200 rounded-xl text-sm resize-none focus:ring-2 focus:ring-primary focus:border-transparent" placeholder="Beschrijf de doelgroep..."></textarea>
            </section>

            <section class="bg-white rounded-xl p-4 shadow-sm">
                <h3 class="font-medium mb-3">Voorbeeld content hints</h3>
                <textarea id="target-examples" class="w-full h-20 p-3 border border-gray-200 rounded-xl text-sm resize-none focus:ring-2 focus:ring-primary focus:border-transparent" placeholder="Voeg voorbeeldzinnen toe..."></textarea>
            </section>
        </main>
    </div>

    <div class="shrink-0 bg-white border-t border-gray-100 p-4 pb-8">
        <button onclick="saveTargetDetail()" class="w-full bg-primary text-white font-bold py-4 rounded-full">Opslaan</button>
    </div>
</div>

<!-- ==================== SCREEN: GENERATION PROGRESS ==================== -->
<div id="screen-generation-progress" class="screen">
    <div class="min-h-full flex flex-col bg-gradient-to-br from-header-start via-primary to-header-end">
        <div class="absolute inset-0 overflow-hidden pointer-events-none">
            <div class="absolute -top-20 -right-20 w-64 h-64 bg-white/10 rounded-full blur-3xl"></div>
            <div class="absolute bottom-1/3 -left-20 w-48 h-48 bg-purple-500/20 rounded-full blur-3xl"></div>
        </div>

        <div class="relative z-10 flex-1 flex flex-col items-center justify-center px-6 py-8">
            <div class="w-40 h-40 mb-8 animate-bounce" style="animation-duration: 2.5s;">
                <div class="w-full h-full bg-contain bg-center bg-no-repeat" style="background-image: url('https://lh3.googleusercontent.com/aida-public/AB6AXuCiGPuoA107qs-BuPe4lYztPMEn9rG_zj_jr7Qd6o3actW5yEH_niQcWloXddXY876AgvDg9eaxy3VrArEAEmH0GgxCr5Xxr2wqoc0Y1Ri0OHOGTe69-gi7-nw74lxLJDGQMD-R7ZuaYZXpPU-y6XA48Y6OOAQgXnOShKYaJmk_8H1cwDCI8YIOCsXwkTXuvEXkVEB7mqxD63KiHXT3EO_SuXFZzIYUH1kT3t8XuV0YkW5s3SM2e7_xJU4aXUGRyUbQgQnkO8O5GneT');"></div>
            </div>

            <h1 class="text-white text-xl font-bold text-center mb-6">Content wordt gegenereerd...</h1>

            <div class="w-full max-w-xs mb-6">
                <div class="flex justify-between mb-2">
                    <span class="text-white/80 text-sm">Voortgang</span>
                    <span id="progress-percent" class="text-white font-bold text-sm">0%</span>
                </div>
                <div class="w-full h-3 bg-white/20 rounded-full overflow-hidden">
                    <div id="progress-bar" class="h-full bg-white rounded-full transition-all duration-500" style="width: 0%;"></div>
                </div>
            </div>

            <div id="generation-activity" class="w-full max-w-xs space-y-3"></div>
        </div>

        <div class="relative z-10 p-6 pb-10">
            <button onclick="cancelGeneration()" class="w-full h-14 border-2 border-white/30 rounded-full text-white font-bold hover:bg-white/10 transition-colors">
                Annuleren
            </button>
        </div>
    </div>
</div>

<!-- ==================== SCREEN: GENERATED RESULTS ==================== -->
<div id="screen-generated-results" class="screen">
    <div class="screen-scroll bg-[#f6f6f8]">
        <header class="bg-white border-b border-gray-100 pt-4 pb-4 px-5">
            <div class="flex items-center justify-between">
                <button onclick="navigateTo('home')" class="h-10 w-10 flex items-center justify-center rounded-full hover:bg-gray-100">
                    <span class="material-symbols-outlined">arrow_back</span>
                </button>
                <h1 class="text-lg font-bold">Gegenereerde content</h1>
                <button onclick="openShareModal()" class="h-10 w-10 flex items-center justify-center rounded-full hover:bg-gray-100">
                    <span class="material-symbols-outlined">share</span>
                </button>
            </div>
        </header>

        <div id="result-tabs" class="flex gap-2 overflow-x-auto no-scrollbar py-4 px-5 bg-white border-b border-gray-100"></div>

        <main id="generated-content-list" class="px-5 py-4 space-y-4 pb-8"></main>
    </div>

    <div class="shrink-0 bg-white border-t border-gray-100 p-4 pb-8">
        <div class="flex gap-3">
            <button onclick="openExportModal()" class="flex-1 bg-text-main text-white font-bold py-3 rounded-full flex items-center justify-center gap-2">
                <span class="material-symbols-outlined text-xl">cloud_upload</span>
                Exporteren
            </button>
            <button onclick="navigateTo('home')" class="px-6 border-2 border-gray-200 font-bold py-3 rounded-full">
                Nieuw
            </button>
        </div>
    </div>

    <!-- Export Modal -->
        <div id="export-modal" class="modal-overlay hidden" onclick="closeExportModal()">
            <div class="modal-content bg-white rounded-t-3xl max-h-[80%] overflow-y-auto" onclick="event.stopPropagation()">
                <div class="p-5">
                    <div class="flex items-center justify-between mb-6">
                        <h2 class="text-xl font-bold">Exporteren naar Bynder</h2>
                        <button onclick="closeExportModal()" class="h-10 w-10 flex items-center justify-center rounded-full hover:bg-gray-100">
                            <span class="material-symbols-outlined">close</span>
                        </button>
                    </div>

                    <div class="mb-6">
                        <h3 class="font-medium mb-3">Selecteer items</h3>
                        <div id="export-items-list" class="space-y-2 max-h-40 overflow-y-auto"></div>
                        <button onclick="selectAllExport()" class="text-primary text-sm font-medium mt-2">Alles selecteren</button>
                    </div>

                    <div class="mb-6">
                        <h3 class="font-medium mb-3">Formaat</h3>
                        <div class="flex gap-2">
                            <button class="export-format-btn flex-1 px-4 py-3 rounded-xl border-2 border-primary bg-primary/5 text-sm font-medium">PDF</button>
                            <button class="export-format-btn flex-1 px-4 py-3 rounded-xl border border-gray-200 text-sm font-medium">Tekst</button>
                            <button class="export-format-btn flex-1 px-4 py-3 rounded-xl border border-gray-200 text-sm font-medium">Word</button>
                        </div>
                    </div>

                    <div id="export-progress" class="hidden mb-6">
                        <div class="flex justify-between mb-2">
                            <span class="text-sm text-text-secondary">Uploaden...</span>
                            <span id="export-progress-percent" class="text-sm font-medium">0%</span>
                        </div>
                        <div class="w-full h-2 bg-gray-100 rounded-full overflow-hidden">
                            <div id="export-progress-bar" class="h-full bg-primary rounded-full transition-all duration-300" style="width: 0%;"></div>
                        </div>
                    </div>

                    <div id="export-success" class="hidden text-center py-6">
                        <div class="w-14 h-14 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-3">
                            <span class="material-symbols-outlined text-green-600 text-2xl">check_circle</span>
                        </div>
                        <h3 class="font-bold mb-1">Export voltooid!</h3>
                        <p class="text-text-secondary text-sm">Bestanden geupload naar Bynder</p>
                    </div>

                    <button id="export-btn" onclick="startExport()" class="w-full bg-primary text-white font-bold py-4 rounded-full">Exporteren</button>
                </div>
            </div>
        </div>

        <!-- Share Modal -->
        <div id="share-modal" class="modal-overlay hidden" onclick="closeShareModal()">
            <div class="modal-content bg-white rounded-t-3xl" onclick="event.stopPropagation()">
                <div class="p-5">
                    <div class="flex items-center justify-between mb-6">
                        <h2 class="text-xl font-bold">Delen</h2>
                        <button onclick="closeShareModal()" class="h-10 w-10 flex items-center justify-center rounded-full hover:bg-gray-100">
                            <span class="material-symbols-outlined">close</span>
                        </button>
                    </div>

                    <div class="space-y-3 mb-4">
                        <button class="w-full flex items-center gap-4 p-4 rounded-xl border border-gray-200 hover:bg-gray-50">
                            <div class="h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center">
                                <span class="material-symbols-outlined text-blue-600">link</span>
                            </div>
                            <div class="text-left">
                                <p class="font-medium">Kopieer link</p>
                                <p class="text-xs text-text-secondary">Deel een interne review link</p>
                            </div>
                        </button>
                        <button class="w-full flex items-center gap-4 p-4 rounded-xl border border-gray-200 hover:bg-gray-50">
                            <div class="h-10 w-10 rounded-full bg-purple-100 flex items-center justify-center">
                                <span class="material-symbols-outlined text-purple-600">mail</span>
                            </div>
                            <div class="text-left">
                                <p class="font-medium">Verstuur via email</p>
                                <p class="text-xs text-text-secondary">Nodig collega's uit</p>
                            </div>
                        </button>
                        <button class="w-full flex items-center gap-4 p-4 rounded-xl border border-gray-200 hover:bg-gray-50">
                            <div class="h-10 w-10 rounded-full bg-green-100 flex items-center justify-center">
                                <span class="material-symbols-outlined text-green-600">chat</span>
                            </div>
                            <div class="text-left">
                                <p class="font-medium">Teams bericht</p>
                                <p class="text-xs text-text-secondary">Deel via Microsoft Teams</p>
                            </div>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- ==================== SCREEN: CONTENT DETAIL ==================== -->
<div id="screen-content-detail" class="screen">
    <div class="screen-scroll bg-[#f6f6f8]">
        <header class="bg-white border-b border-gray-100 pt-4 pb-4 px-5">
            <div class="flex items-center justify-between">
                <button onclick="navigateTo('generated-results')" class="h-10 w-10 flex items-center justify-center rounded-full hover:bg-gray-100">
                    <span class="material-symbols-outlined">arrow_back</span>
                </button>
                <h1 id="content-detail-title" class="text-lg font-bold">Bewerken</h1>
                <button class="h-10 w-10 flex items-center justify-center rounded-full hover:bg-gray-100">
                    <span class="material-symbols-outlined">more_vert</span>
                </button>
            </div>
        </header>

        <main class="px-5 py-4">
            <div class="flex items-center gap-2 mb-4">
                <div class="h-7 px-3 rounded-full bg-green-100 flex items-center gap-1.5">
                    <span class="material-symbols-outlined text-green-600 text-base" style="font-variation-settings: 'FILL' 1;">check_circle</span>
                    <span class="text-xs font-bold text-green-700">Tone of voice: Odido</span>
                </div>
            </div>

            <section class="bg-white rounded-2xl p-4 shadow-sm mb-4">
                <textarea id="content-edit-area" oninput="updateWordCount()" class="w-full min-h-[250px] p-3 border-0 text-base leading-relaxed resize-none focus:outline-none"></textarea>
            </section>

            <div class="flex items-center justify-between text-sm text-text-secondary">
                <span id="word-count">0 woorden</span>
                <span id="char-count">0 karakters</span>
            </div>
        </main>
    </div>

    <div class="shrink-0 bg-white border-t border-gray-100 p-4 pb-8">
        <div class="flex gap-3">
            <button onclick="copyContent()" class="flex-1 border-2 border-gray-200 font-bold py-3 rounded-full flex items-center justify-center gap-2">
                <span class="material-symbols-outlined text-xl">content_copy</span>
                Kopieer
            </button>
            <button onclick="downloadContent()" class="flex-1 border-2 border-gray-200 font-bold py-3 rounded-full flex items-center justify-center gap-2">
                <span class="material-symbols-outlined text-xl">download</span>
                Download
            </button>
        </div>
    </div>
</div>

</div>
<!-- END APP -->

        </div>
    </div>
</div>

<script>
// ==================== DATA ====================

const uploaders = [
    "Sarah de Vries", "Mark Janssen", "Lisa van den Berg", "Peter de Groot", "Anna Bakker",
    "Tom Visser", "Emma Smit", "Jan de Boer", "Sophie Mulder", "David Hendriks",
    "Julia Peters", "Kevin van Dijk", "Maria Jansen", "Robin de Jong", "Eva Meijer"
];

const fileTypes = [
    { id: 'copydoc', name: 'CopyDoc', icon: 'description', color: 'orange' },
    { id: 'campaign', name: 'Campaign', icon: 'campaign', color: 'pink' },
    { id: 'sales', name: 'Sales', icon: 'sell', color: 'blue' },
    { id: 'whitepaper', name: 'Whitepaper', icon: 'article', color: 'purple' },
    { id: 'presentation', name: 'Presentatie', icon: 'slideshow', color: 'teal' },
    { id: 'news', name: 'Nieuws', icon: 'newspaper', color: 'red' },
    { id: 'blog', name: 'Blog', icon: 'rss_feed', color: 'green' }
];

const fileTitles = [
    "Glasvezel Q1 2024 Copy", "5G Business Propositie", "Winter Campaign Socials", "Zakelijke Connectiviteit Guide",
    "MKB Telecom Oplossingen", "Enterprise Network Solutions", "IoT voor Zorg Whitepaper", "Retail Connectivity Brief",
    "Overheid Digitalisering", "Sales Deck Q2", "Klantcase Gemeente Amsterdam", "Productlancering Glasvezel Pro",
    "Social Media Strategie 2024", "Email Marketing Templates", "Brand Guidelines Update", "Klantenservice Scripts",
    "Partner Programma Presentatie", "Technische Specificaties 5G", "Prijslijst Zakelijk 2024", "FAQ Glasvezel",
    "Campagne Resultaten H1", "Benchmark Rapport Telecom", "Duurzaamheid Initiatief", "Netwerk Uitbreiding Plan",
    "Customer Journey Mapping", "Concurrentie Analyse", "Marktonderzoek MKB", "Tone of Voice Document",
    "SEO Content Strategie", "Webinar Series Planning", "Case Study Logistiek", "Brochure Zakelijke Diensten",
    "Newsletter Template Pack", "Video Script Collectie", "Infographic Collectie", "Podcast Talking Points",
    "Press Release Templates", "Crisis Communicatie Plan", "Internal Memo Templates", "Training Materials Pack",
    "Onboarding Documenten", "Sales Battlecards", "Competitor Comparison", "ROI Calculator Guide",
    "Implementation Checklist", "Service Level Agreement", "Data Privacy Statement", "Terms and Conditions",
    "User Manual Business Portal", "Quick Start Guide IoT", "Troubleshooting Guide", "Network Monitoring Tips",
    "Security Best Practices", "Cloud Migration Guide", "API Documentatie", "Integration Playbook",
    "Customer Success Stories", "Industry Reports 2024", "Future Tech Predictions", "Digital Transformation Guide",
    "Hybrid Work Solutions", "Collaboration Tools", "VoIP Setup Guide", "Mobile Device Management",
    "Cyber Security Basics", "GDPR Compliance Check", "Business Continuity Plan", "Disaster Recovery Guide"
];

const contentSamples = {
    linkedin: `Ontdek de nieuwe mogelijkheden voor zakelijke connectiviteit die naadloos aansluiten bij uw groeiambities.

Bij Odido begrijpen we dat connectiviteit de basis is van modern ondernemen. Daarom bieden wij schaalbare oplossingen die met u meegroeien.

#Odido #ZakelijkeConnectiviteit #5G #Glasvezel`,
    newsletter: `Beste relatie,

Goed nieuws! We hebben weer mooie ontwikkelingen te delen.

Dit kwartaal hebben we onze glasvezel-dekking uitgebreid naar 15 nieuwe bedrijventerreinen.

Met vriendelijke groet,
Team Odido Business`,
    googleads: `Zakelijke Glasvezel vanaf 49/mnd | Odido Business
Supersnel internet tot 10 Gbps. Betrouwbaar netwerk.
www.odido.nl/zakelijk`,
    website: `Zakelijke Connectiviteit op Maat

Bij Odido Business begrijpen we dat elke organisatie uniek is. Daarom bieden wij flexibele connectiviteitsoplossingen.

Neem contact op voor een vrijblijvend adviesgesprek.`
};

// Generate files
let sourceFiles = [];
for (let i = 0; i < 70; i++) {
    const type = fileTypes[Math.floor(Math.random() * fileTypes.length)];
    sourceFiles.push({
        id: i + 1,
        title: fileTitles[i] || `Document ${i + 1}`,
        type: type.id,
        typeName: type.name,
        icon: type.icon,
        color: type.color,
        uploader: uploaders[Math.floor(Math.random() * uploaders.length)],
        date: new Date(Date.now() - Math.floor(Math.random() * 90) * 24 * 60 * 60 * 1000),
        status: ['Live', 'Draft', 'Review'][Math.floor(Math.random() * 3)],
        recycleCount: Math.floor(Math.random() * 10)
    });
}
sourceFiles.sort((a, b) => b.date - a.date);

let targetAudiences = [
    { id: 'mkb', name: 'MKB', icon: 'storefront', selected: true, description: 'Midden- en kleinbedrijf met 10-250 medewerkers.' },
    { id: 'enterprise', name: 'Enterprise', icon: 'corporate_fare', selected: true, description: 'Grote organisaties met 250+ medewerkers.' },
    { id: 'zorg', name: 'Zorg', icon: 'local_hospital', selected: false, description: 'Zorginstellingen en ziekenhuizen.' },
    { id: 'retail', name: 'Retail', icon: 'shopping_bag', selected: false, description: 'Winkels en retail ketens.' },
    { id: 'overheid', name: 'Overheid', icon: 'account_balance', selected: false, description: 'Overheidsinstellingen.' },
    { id: 'onderwijs', name: 'Onderwijs', icon: 'school', selected: false, description: 'Scholen en universiteiten.' }
];

let channels = [
    { id: 'website', name: 'Website', icon: 'language', color: 'blue', enabled: true },
    { id: 'linkedin', name: 'LinkedIn', icon: 'share', color: 'blue', enabled: true },
    { id: 'newsletter', name: 'Nieuwsbrief', icon: 'mail', color: 'orange', enabled: true },
    { id: 'facebook', name: 'Facebook', icon: 'thumb_up', color: 'indigo', enabled: false },
    { id: 'instagram', name: 'Instagram', icon: 'photo_camera', color: 'pink', enabled: false },
    { id: 'twitter', name: 'Twitter/X', icon: 'tag', color: 'sky', enabled: false },
    { id: 'googleads', name: 'Google Ads', icon: 'ads_click', color: 'green', enabled: true },
    { id: 'salesdeck', name: 'Sales Deck', icon: 'slideshow', color: 'teal', enabled: false },
    { id: 'pressrelease', name: 'Persbericht', icon: 'newspaper', color: 'red', enabled: false },
    { id: 'blogpost', name: 'Blogpost', icon: 'rss_feed', color: 'purple', enabled: false },
    { id: 'whatsapp', name: 'WhatsApp', icon: 'chat', color: 'green', enabled: false },
    { id: 'podcast', name: 'Podcast', icon: 'podcasts', color: 'violet', enabled: false },
    { id: 'video', name: 'Video Script', icon: 'videocam', color: 'red', enabled: false }
];

let historyItems = [];
for (let i = 0; i < 20; i++) {
    historyItems.push({
        id: i + 1,
        file: sourceFiles[Math.floor(Math.random() * 20)],
        action: ['recycled', 'viewed', 'exported', 'shared'][Math.floor(Math.random() * 4)],
        date: new Date(Date.now() - Math.floor(Math.random() * 72) * 60 * 60 * 1000),
        targets: ['MKB', 'Enterprise'].slice(0, Math.floor(Math.random() * 2) + 1)
    });
}
historyItems.sort((a, b) => b.date - a.date);

let currentScreen = 'home';
let currentFile = null;
let currentTarget = null;
let selectedSource = null;
let generatedContent = {};
let currentResultTab = 'mkb';
let currentContentItem = null;
let generationInterval = null;

// ==================== NAVIGATION ====================

function navigateTo(screen) {
    document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
    document.getElementById('screen-' + screen)?.classList.add('active');
    currentScreen = screen;

    if (screen === 'home') renderHomeFiles();
    if (screen === 'library') renderLibraryFiles();
    if (screen === 'history') renderHistory();
    if (screen === 'target-selection') renderTargetSelection();
    if (screen === 'generated-results') renderGeneratedResults();
}

function goBack() {
    navigateTo('home');
}

// ==================== RENDERING ====================

const colorClasses = {
    orange: 'bg-orange-50 text-orange-500',
    pink: 'bg-pink-50 text-pink-500',
    blue: 'bg-blue-50 text-blue-500',
    purple: 'bg-purple-50 text-purple-500',
    teal: 'bg-teal-50 text-teal-500',
    red: 'bg-red-50 text-red-500',
    green: 'bg-green-50 text-green-500'
};

const statusColors = {
    Live: 'bg-green-50 text-green-600',
    Draft: 'bg-gray-100 text-gray-500',
    Review: 'bg-yellow-50 text-yellow-600'
};

function getTimeAgo(date) {
    const hours = Math.floor((new Date() - date) / (1000 * 60 * 60));
    if (hours < 1) return 'Zojuist';
    if (hours < 24) return hours + 'u geleden';
    const days = Math.floor(hours / 24);
    if (days === 1) return 'Gisteren';
    if (days < 7) return days + 'd geleden';
    return date.toLocaleDateString('nl-NL');
}

function renderFileCard(file) {
    return `
        <div onclick="openFileDetail(${file.id})" class="bg-white rounded-2xl p-4 shadow-sm cursor-pointer active:scale-[0.98] transition-transform">
            <div class="flex items-start gap-3">
                <div class="h-12 w-12 shrink-0 rounded-xl ${colorClasses[file.color]} flex items-center justify-center">
                    <span class="material-symbols-outlined text-xl">${file.icon}</span>
                </div>
                <div class="flex-1 min-w-0">
                    <h3 class="font-bold text-sm leading-tight mb-0.5 truncate">${file.title}</h3>
                    <p class="text-text-secondary text-xs">${getTimeAgo(file.date)}</p>
                </div>
            </div>
            <div class="flex items-center justify-between mt-3">
                <div class="flex gap-1.5">
                    <span class="inline-flex rounded-full ${colorClasses[file.color]} px-2 py-0.5 text-[10px] font-bold">${file.typeName}</span>
                    <span class="inline-flex rounded-full ${statusColors[file.status]} px-2 py-0.5 text-[10px] font-bold">${file.status}</span>
                </div>
                <button onclick="event.stopPropagation(); quickRecycle(${file.id})" class="flex items-center gap-1 text-nav-blue text-xs font-bold bg-blue-50 px-2.5 py-1 rounded-full">
                    <span class="material-symbols-outlined text-sm">cached</span>Recycle
                </button>
            </div>
        </div>
    `;
}

function renderHomeFiles() {
    document.getElementById('home-files-grid').innerHTML = sourceFiles.slice(0, 10).map(f => renderFileCard(f)).join('');
}

function renderLibraryFiles() {
    document.getElementById('library-files-grid').innerHTML = sourceFiles.map(f => renderFileCard(f)).join('');
}

function filterLibrary(query) {
    const filtered = sourceFiles.filter(f =>
        f.title.toLowerCase().includes(query.toLowerCase()) ||
        f.typeName.toLowerCase().includes(query.toLowerCase())
    );
    document.getElementById('library-files-grid').innerHTML = filtered.map(f => renderFileCard(f)).join('');
}

function filterLibraryCategory(category) {
    document.querySelectorAll('.lib-category-btn').forEach(btn => {
        btn.classList.remove('bg-primary', 'text-white');
        btn.classList.add('bg-white', 'text-text-main');
    });
    event.target.classList.add('bg-primary', 'text-white');
    event.target.classList.remove('bg-white', 'text-text-main');

    const filtered = category === 'all' ? sourceFiles : sourceFiles.filter(f => f.type === category);
    document.getElementById('library-files-grid').innerHTML = filtered.map(f => renderFileCard(f)).join('');
}

function renderHistory() {
    const actionIcons = {
        recycled: { icon: 'recycling', color: 'text-primary bg-primary/10' },
        viewed: { icon: 'visibility', color: 'text-blue-500 bg-blue-50' },
        exported: { icon: 'cloud_upload', color: 'text-green-500 bg-green-50' },
        shared: { icon: 'share', color: 'text-purple-500 bg-purple-50' }
    };
    const actionText = { recycled: 'Content gerecycled', viewed: 'Bekeken', exported: 'Geexporteerd', shared: 'Gedeeld' };

    document.getElementById('history-list').innerHTML = historyItems.map(item => `
        <div class="bg-white rounded-xl p-4 shadow-sm">
            <div class="flex items-start gap-3">
                <div class="h-10 w-10 rounded-full ${actionIcons[item.action].color} flex items-center justify-center shrink-0">
                    <span class="material-symbols-outlined">${actionIcons[item.action].icon}</span>
                </div>
                <div class="flex-1 min-w-0">
                    <p class="font-medium text-sm">${actionText[item.action]}</p>
                    <p class="text-text-secondary text-xs truncate">${item.file.title}</p>
                </div>
                <span class="text-xs text-text-secondary shrink-0">${getTimeAgo(item.date)}</span>
            </div>
        </div>
    `).join('');
}

// ==================== SEARCH ====================

function handleSearch(query) {
    const autocomplete = document.getElementById('search-autocomplete');

    if (query.length < 1) {
        autocomplete.classList.add('hidden');
        return;
    }

    const results = sourceFiles.filter(f =>
        f.title.toLowerCase().includes(query.toLowerCase()) ||
        f.typeName.toLowerCase().includes(query.toLowerCase()) ||
        f.uploader.toLowerCase().includes(query.toLowerCase())
    ).slice(0, 8);

    if (results.length === 0) {
        autocomplete.innerHTML = '<div class="p-4 text-center text-text-secondary text-sm">Geen resultaten gevonden</div>';
    } else {
        autocomplete.innerHTML = results.map(f => `
            <div onclick="openFileDetail(${f.id}); hideSearch()" class="autocomplete-item flex items-center gap-3 p-3 cursor-pointer border-b border-gray-50 last:border-0">
                <div class="h-10 w-10 rounded-lg ${colorClasses[f.color]} flex items-center justify-center shrink-0">
                    <span class="material-symbols-outlined text-lg">${f.icon}</span>
                </div>
                <div class="flex-1 min-w-0">
                    <p class="text-sm font-medium truncate">${f.title}</p>
                    <p class="text-xs text-text-secondary">${f.typeName}  ${f.uploader}</p>
                </div>
            </div>
        `).join('');
    }

    autocomplete.classList.remove('hidden');
}

function handleSearchFocus() {
    const query = document.getElementById('search-input').value;
    if (query.length >= 1) handleSearch(query);
}

function hideSearch() {
    document.getElementById('search-autocomplete').classList.add('hidden');
    document.getElementById('search-input').value = '';
}

// ==================== FILE DETAIL ====================

function openFileDetail(id) {
    currentFile = sourceFiles.find(f => f.id === id);
    if (!currentFile) return;

    document.getElementById('file-detail-header').innerHTML = `
        <div class="flex items-start gap-4 mb-4">
            <div class="h-14 w-14 rounded-xl ${colorClasses[currentFile.color]} flex items-center justify-center shrink-0">
                <span class="material-symbols-outlined text-2xl">${currentFile.icon}</span>
            </div>
            <div>
                <h1 class="font-bold text-lg leading-tight mb-1">${currentFile.title}</h1>
                <p class="text-text-secondary text-sm">${currentFile.typeName}</p>
            </div>
        </div>
    `;

    document.getElementById('file-preview').innerHTML = `
        <p class="mb-2"><strong>Zakelijke Connectiviteit</strong></p>
        <p class="mb-2">In het digitale tijdperk is betrouwbare connectiviteit essentieel. Odido biedt zakelijke oplossingen van glasvezel tot 5G-netwerken.</p>
        <p>Onze accountmanagers zorgen voor de optimale oplossing met 24/7 ondersteuning.</p>
    `;

    document.getElementById('file-metadata').innerHTML = `
        <div class="flex justify-between py-2 border-b border-gray-100">
            <span class="text-text-secondary text-sm">Geupload door</span>
            <span class="text-sm font-medium">${currentFile.uploader}</span>
        </div>
        <div class="flex justify-between py-2 border-b border-gray-100">
            <span class="text-text-secondary text-sm">Datum</span>
            <span class="text-sm font-medium">${currentFile.date.toLocaleDateString('nl-NL')}</span>
        </div>
        <div class="flex justify-between py-2">
            <span class="text-text-secondary text-sm">Status</span>
            <span class="text-sm font-medium">${currentFile.status}</span>
        </div>
    `;

    navigateTo('file-detail');
}

function recycleCurrentFile() {
    selectedSource = currentFile;
    navigateTo('target-selection');
}

function quickRecycle(id) {
    selectedSource = sourceFiles.find(f => f.id === id);
    navigateTo('target-selection');
}

function startNewRecycle() {
    selectedSource = sourceFiles[0];
    navigateTo('target-selection');
}

// ==================== TARGET SELECTION ====================

function renderTargetSelection() {
    if (!selectedSource) selectedSource = sourceFiles[0];

    document.getElementById('selected-source').innerHTML = `
        <div class="flex items-center gap-4">
            <div class="h-12 w-12 rounded-lg ${colorClasses[selectedSource.color]} flex items-center justify-center">
                <span class="material-symbols-outlined text-xl">${selectedSource.icon}</span>
            </div>
            <div class="flex-1">
                <p class="font-bold text-sm">${selectedSource.title}</p>
                <p class="text-text-secondary text-xs uppercase">Bronbestand</p>
            </div>
        </div>
    `;

    document.getElementById('target-audiences-grid').innerHTML = targetAudiences.map(t => `
        <button onclick="toggleTarget('${t.id}')" class="relative flex flex-col p-3 bg-white rounded-xl border-2 ${t.selected ? 'border-primary' : 'border-transparent'} shadow-sm text-left">
            ${t.selected ? '<div class="absolute top-2 right-2 h-5 w-5 rounded-full bg-primary flex items-center justify-center"><span class="material-symbols-outlined text-white text-xs">check</span></div>' : '<div class="absolute top-2 right-2 h-5 w-5 rounded-full bg-gray-100 border border-gray-200"></div>'}
            <div class="h-10 w-10 rounded-lg bg-primary/10 text-primary flex items-center justify-center mb-2">
                <span class="material-symbols-outlined">${t.icon}</span>
            </div>
            <p class="font-bold text-sm">${t.name}</p>
            <p class="text-xs ${t.selected ? 'text-primary' : 'text-text-secondary'}">${t.selected ? 'Geselecteerd' : 'Niet actief'}</p>
            <button onclick="event.stopPropagation(); openTargetDetail('${t.id}')" class="absolute bottom-2 right-2 h-6 w-6 rounded-full hover:bg-gray-100 flex items-center justify-center">
                <span class="material-symbols-outlined text-gray-400 text-base">edit</span>
            </button>
        </button>
    `).join('');

    const channelColors = {
        blue: 'bg-blue-50 text-blue-600', orange: 'bg-orange-50 text-orange-600', pink: 'bg-pink-50 text-pink-600',
        indigo: 'bg-indigo-50 text-indigo-600', sky: 'bg-sky-50 text-sky-600', green: 'bg-green-50 text-green-600',
        teal: 'bg-teal-50 text-teal-600', red: 'bg-red-50 text-red-600', purple: 'bg-purple-50 text-purple-600', violet: 'bg-violet-50 text-violet-600'
    };

    document.getElementById('channels-list').innerHTML = channels.map((c, i) => `
        <div class="flex items-center justify-between p-3 ${i < channels.length - 1 ? 'border-b border-gray-100' : ''}">
            <div class="flex items-center gap-3">
                <div class="h-9 w-9 rounded-full ${channelColors[c.color]} flex items-center justify-center">
                    <span class="material-symbols-outlined text-lg">${c.icon}</span>
                </div>
                <span class="font-medium text-sm">${c.name}</span>
            </div>
            <button onclick="toggleChannel('${c.id}')" class="toggle-switch w-10 h-5 rounded-full ${c.enabled ? 'active bg-primary' : 'bg-gray-200'} relative">
                <div class="toggle-dot absolute top-0.5 left-0.5 h-4 w-4 bg-white rounded-full shadow"></div>
            </button>
        </div>
    `).join('');
}

function toggleTarget(id) {
    const t = targetAudiences.find(t => t.id === id);
    if (t) { t.selected = !t.selected; renderTargetSelection(); }
}

function toggleChannel(id) {
    const c = channels.find(c => c.id === id);
    if (c) { c.enabled = !c.enabled; renderTargetSelection(); }
}

function openTargetDetail(id) {
    currentTarget = targetAudiences.find(t => t.id === id);
    if (!currentTarget) return;

    document.getElementById('target-detail-title').textContent = currentTarget.name;
    document.getElementById('target-description').value = currentTarget.description || '';

    const icons = ['storefront', 'corporate_fare', 'local_hospital', 'shopping_bag', 'account_balance', 'school', 'factory', 'apartment', 'business', 'work', 'groups', 'person'];
    document.getElementById('icon-selector').innerHTML = icons.map(icon => `
        <button onclick="selectIcon('${icon}')" class="h-10 w-10 rounded-xl border-2 ${currentTarget.icon === icon ? 'border-primary bg-primary/10' : 'border-gray-200'} flex items-center justify-center">
            <span class="material-symbols-outlined ${currentTarget.icon === icon ? 'text-primary' : 'text-gray-600'}">${icon}</span>
        </button>
    `).join('');

    navigateTo('target-detail');
}

function selectIcon(icon) {
    if (currentTarget) { currentTarget.icon = icon; openTargetDetail(currentTarget.id); }
}

function saveTargetDetail() {
    if (currentTarget) currentTarget.description = document.getElementById('target-description').value;
    navigateTo('target-selection');
}

// ==================== GENERATION ====================

function startGeneration() {
    const selected = targetAudiences.filter(t => t.selected);
    const enabled = channels.filter(c => c.enabled);

    if (!selected.length || !enabled.length) { alert('Selecteer minimaal een doelgroep en kanaal'); return; }

    navigateTo('generation-progress');

    document.getElementById('progress-bar').style.width = '0%';
    document.getElementById('progress-percent').textContent = '0%';
    document.getElementById('generation-activity').innerHTML = '';

    generatedContent = {};
    selected.forEach(target => {
        generatedContent[target.id] = {};
        enabled.forEach(channel => {
            generatedContent[target.id][channel.id] = {
                channel: channel,
                content: (contentSamples[channel.id] || contentSamples.linkedin).replace(/MKB|Enterprise/g, target.name)
            };
        });
    });

    const steps = [
        { progress: 20, text: 'Bronbestand analyseren...', done: false },
        { progress: 45, text: 'Content genereren...', done: false },
        { progress: 70, text: 'Doelgroepen verwerken...', done: true },
        { progress: 90, text: 'Tone of voice valideren...', done: true },
        { progress: 100, text: 'Voltooid!', done: true }
    ];

    let idx = 0;
    generationInterval = setInterval(() => {
        if (idx < steps.length) {
            const step = steps[idx];
            document.getElementById('progress-bar').style.width = step.progress + '%';
            document.getElementById('progress-percent').textContent = step.progress + '%';

            const item = document.createElement('div');
            item.className = step.done ? 'glass-card rounded-xl p-3 flex items-center gap-3' : 'bg-white/10 border border-white/20 rounded-xl p-3 flex items-center justify-between';
            item.innerHTML = step.done ?
                `<div class="h-7 w-7 rounded-full bg-green-100 text-green-600 flex items-center justify-center"><span class="material-symbols-outlined text-base">check</span></div><span class="text-slate-900 font-medium text-sm">${step.text}</span>` :
                `<div class="flex items-center gap-3"><div class="h-7 w-7 rounded-full bg-white/20 text-white flex items-center justify-center animate-pulse"><span class="material-symbols-outlined text-base">edit_note</span></div><span class="text-white font-medium text-sm">${step.text}</span></div><div class="h-4 w-4 border-2 border-white/30 border-t-white rounded-full animate-spin"></div>`;
            document.getElementById('generation-activity').appendChild(item);

            idx++;
            if (step.progress >= 100) {
                clearInterval(generationInterval);
                setTimeout(() => {
                    currentResultTab = selected[0]?.id || 'mkb';
                    navigateTo('generated-results');
                }, 1000);
            }
        }
    }, 800);
}

function cancelGeneration() {
    clearInterval(generationInterval);
    navigateTo('home');
}

// ==================== RESULTS ====================

function renderGeneratedResults() {
    const selected = targetAudiences.filter(t => t.selected);

    document.getElementById('result-tabs').innerHTML = selected.map(t =>
        `<button onclick="switchTab('${t.id}')" class="whitespace-nowrap px-4 py-2 rounded-full text-sm font-bold ${currentResultTab === t.id ? 'bg-primary text-white' : 'bg-white text-text-main'}">${t.name}</button>`
    ).join('');

    const content = generatedContent[currentResultTab] || {};
    document.getElementById('generated-content-list').innerHTML = Object.entries(content).map(([id, item]) => `
        <div class="bg-white rounded-2xl p-4 shadow-sm">
            <div class="flex items-center gap-3 mb-3">
                <div class="h-9 w-9 rounded-full bg-primary/10 text-primary flex items-center justify-center">
                    <span class="material-symbols-outlined text-lg">${item.channel.icon}</span>
                </div>
                <div class="flex-1">
                    <h3 class="font-bold text-sm">${item.channel.name}</h3>
                    <p class="text-xs text-text-secondary">${Math.floor(Math.random() * 5) + 1} min geleden</p>
                </div>
            </div>
            <div class="bg-gray-50 rounded-xl p-3 mb-3">
                <p class="text-sm text-gray-700 line-clamp-3">${item.content}</p>
            </div>
            <div class="flex items-center justify-between">
                <div class="h-6 px-2 rounded-full bg-green-50 flex items-center gap-1">
                    <span class="material-symbols-outlined text-green-600 text-xs" style="font-variation-settings:'FILL' 1">check_circle</span>
                    <span class="text-[10px] font-bold text-green-700">Odido ToV</span>
                </div>
                <div class="flex gap-2">
                    <button onclick="openContentDetail('${currentResultTab}','${id}')" class="h-7 px-3 rounded-full bg-primary text-white text-xs font-bold flex items-center gap-1">
                        <span class="material-symbols-outlined text-sm">edit</span>Bewerk
                    </button>
                    <button onclick="copyText(\`${item.content.replace(/`/g, '')}\`)" class="h-7 w-7 rounded-full border border-gray-200 flex items-center justify-center">
                        <span class="material-symbols-outlined text-base">content_copy</span>
                    </button>
                </div>
            </div>
        </div>
    `).join('');
}

function switchTab(id) { currentResultTab = id; renderGeneratedResults(); }

function openContentDetail(targetId, channelId) {
    currentContentItem = generatedContent[targetId]?.[channelId];
    if (!currentContentItem) return;

    document.getElementById('content-detail-title').textContent = currentContentItem.channel.name;
    document.getElementById('content-edit-area').value = currentContentItem.content;
    updateWordCount();
    navigateTo('content-detail');
}

function updateWordCount() {
    const text = document.getElementById('content-edit-area').value;
    document.getElementById('word-count').textContent = (text.trim() ? text.trim().split(/\s+/).length : 0) + ' woorden';
    document.getElementById('char-count').textContent = text.length + ' karakters';
}

function copyContent() { copyText(document.getElementById('content-edit-area').value); }
function downloadContent() {
    const blob = new Blob([document.getElementById('content-edit-area').value], { type: 'text/plain' });
    const a = document.createElement('a'); a.href = URL.createObjectURL(blob);
    a.download = (currentContentItem?.channel?.name || 'content') + '.txt'; a.click();
}

function copyText(text) { navigator.clipboard.writeText(text).then(() => alert('Gekopieerd!')); }

// ==================== FILTERS ====================

function filterByCategory(category) {
    document.querySelectorAll('.category-btn').forEach(btn => {
        const isActive = btn.dataset.category === category;
        btn.classList.toggle('bg-primary', isActive);
        btn.classList.toggle('text-white', isActive);
        btn.classList.toggle('shadow-md', isActive);
        btn.classList.toggle('bg-white', !isActive);
        btn.classList.toggle('text-gray-600', !isActive);
    });
    const filtered = category === 'all' ? sourceFiles.slice(0, 10) : sourceFiles.filter(f => f.type === category).slice(0, 10);
    document.getElementById('home-files-grid').innerHTML = filtered.map(f => renderFileCard(f)).join('');
}

function openFilterModal() {
    const modal = document.getElementById('filter-modal');
    modal.classList.remove('hidden');
    setTimeout(() => modal.classList.add('show'), 10);
}

function closeFilterModal() {
    const modal = document.getElementById('filter-modal');
    modal.classList.remove('show');
    setTimeout(() => modal.classList.add('hidden'), 300);
}

function applyFilters() { closeFilterModal(); }

// ==================== EXPORT ====================

function openExportModal() {
    const modal = document.getElementById('export-modal');
    modal.classList.remove('hidden');
    setTimeout(() => modal.classList.add('show'), 10);

    document.getElementById('export-progress').classList.add('hidden');
    document.getElementById('export-success').classList.add('hidden');
    document.getElementById('export-btn').classList.remove('hidden');

    const items = [];
    targetAudiences.filter(t => t.selected).forEach(target => {
        Object.values(generatedContent[target.id] || {}).forEach(item => {
            items.push({ target: target.name, channel: item.channel.name });
        });
    });

    document.getElementById('export-items-list').innerHTML = items.map(item =>
        `<label class="flex items-center gap-3 p-2 bg-gray-50 rounded-lg cursor-pointer">
            <input type="checkbox" checked class="export-check h-4 w-4 rounded border-gray-300 text-primary"/>
            <span class="text-sm">${item.channel} - ${item.target}</span>
        </label>`
    ).join('');
}

function closeExportModal() {
    const modal = document.getElementById('export-modal');
    modal.classList.remove('show');
    setTimeout(() => modal.classList.add('hidden'), 300);
}

function selectAllExport() { document.querySelectorAll('.export-check').forEach(cb => cb.checked = true); }

function startExport() {
    document.getElementById('export-progress').classList.remove('hidden');
    document.getElementById('export-btn').classList.add('hidden');

    let progress = 0;
    const interval = setInterval(() => {
        progress += Math.random() * 25;
        if (progress >= 100) {
            progress = 100;
            clearInterval(interval);
            setTimeout(() => {
                document.getElementById('export-progress').classList.add('hidden');
                document.getElementById('export-success').classList.remove('hidden');
            }, 400);
        }
        document.getElementById('export-progress-bar').style.width = progress + '%';
        document.getElementById('export-progress-percent').textContent = Math.round(progress) + '%';
    }, 250);
}

function openShareModal() {
    const modal = document.getElementById('share-modal');
    modal.classList.remove('hidden');
    setTimeout(() => modal.classList.add('show'), 10);
}

function closeShareModal() {
    const modal = document.getElementById('share-modal');
    modal.classList.remove('show');
    setTimeout(() => modal.classList.add('hidden'), 300);
}

// ==================== INIT ====================

document.addEventListener('DOMContentLoaded', () => {
    renderHomeFiles();
    filterByCategory('all');

    document.addEventListener('click', (e) => {
        if (!e.target.closest('#search-container')) hideSearch();
    });
});
</script>

</body>
</html>
